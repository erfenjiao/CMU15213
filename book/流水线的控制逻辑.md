# 1
首先我们来看一下指令执行时出现的特殊情况以及期望得到的处理。
## 第一种特殊情况　加载/使用冒险
例如，当前这两条指令顺序出现时，二者之间存在数据相关
> mrmovq 0(%rdx) , %rax
> addq %rbx , %rax

因此会产生加载/使用冒险，当指令 `mrmovq` 处于执行阶段时，紧跟其后的 `addq` 指令处于译码阶段。此时，我们期望指令 `addq` 可以阻塞在译码阶段，等待指令 `mrmovq` 完成访存操作时，通过数据转发逻辑来解决这个数据冒险。然后指令 `addq` 继续执行。

--

流水线的控制逻辑不仅需要检测这种冒险的发生，还要，的指令按照期望的方向去执行。具体的解决方法是：保持流水线寄存器Ｆ和Ｄ的状态不变，同时向寄存器Ｅ中插入一个气泡，这样一来，二者之间冒险就这样解决了，除了指令 `mrmovq` 之外，指令 `popq` 同样可能产生加载/使用的冒险情况
## 第二种特殊情况　分支预测发生错误时
当跳转指令达到执行阶段时，可以检测到预测错误，那么下一个时钟周期，需要取消两条已经取到的指令，具体的解决方法是：像流水线寄存器Ｄ和Ｅ中插入气泡，这样一来就可以纠正预测导致的错误
## 第三种　返回指令的处理
当取值阶段取到返回指令 `ret` 时，指令`ret` 需要经过译码、执行以及访存之后才能读到下一条指令的地址，虽然取值阶段会不断的读取错误的指令，但是在译码阶段就被替换成了气泡，气泡会经过剩下的流水阶段，因此，通过插入三个气泡，就可以达到期望的效果。
只不过流水线连续的三个周期都取出了不正确的指令，
## 还有一种特殊的情况是对异常的处理

# 2
对于以上四种特殊情况的处理，可以通过流水线的控制逻辑来实现，控制逻辑执行的操作就是在出现特殊情况时，通过暂停和插入气泡来保证程序的正确运行。通俗点讲，暂停，就是保证流水线寄存器的状态不改变；插入气泡就是将寄存器的状态做一个类似“清零”的操作（暂停，和气泡的实现方法 4-8）
##　实例
到目前为止，我们假设任意一个时钟周期内，最多只能出现一个特殊情况
